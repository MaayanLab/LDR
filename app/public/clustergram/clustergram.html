<!-- Custom CSS -->
<link rel="stylesheet" href="clustergram/static/lib/css/keen-dashboards.css">
<link rel="stylesheet" href="clustergram/static/lib/css/bootstrap-switch.css">
<link rel="stylesheet" href="clustergram/static/lib/css/dc.css">
<!-- <link rel="stylesheet" href="clustergram/static/css/custom.css" /> -->
<link rel="stylesheet" href="clustergram/static/css/specific.css" />
<link rel="stylesheet" href="clustergram/static/css/jquery.accordion.css">
<link rel="stylesheet" href="clustergram/static/css/jquery-ui.css">
<div id='button_container'>
  <div id='toggle_order' class="btn-group" data-toggle="buttons">
    <label class="btn btn-primary prot_class" onclick="d3_clustergram.reorder('clust');">
      <input type="radio" name="options" id="clust_button" autocomplete="off" checked>Cluster
    </label>
    <label class="btn btn-primary active prot_class" onclick="d3_clustergram.reorder('rank');">
      <input type="radio" name="options" id="rank_button" autocomplete="off"> Rank
    </label>
  </div>
</div>
<div id='clust_and_row_container'>
  <div id='svg_div' class='svg_div'></div>
</div>
<!-- Modal -->
<div id='modal_no_input' class="modal fade" role="dialog" aria-labelledby="gridSystemModalLabel"
aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title" id="gridSystemModalLabel">Please input genes</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
          <p>Input one human/mouse gene symbol per line. </p>
          <p>For instance:</p>
          <div>PER1</div>
          <div>SENP3</div>
          <div>TOP2A</div>
          <div>PTPN7</div>
          <div>...</div>
        </div>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
<!-- Vendor -->
<!-- jQuery -->
<script src="clustergram/static/lib/js/jquery-1.11.2.min.js"></script>
<!-- adding jquery links -->
<script src="clustergram/static/lib/js/jquery-ui.js"></script>
<script src='clustergram/static/lib/js/jquery.accordion.js'></script>
<!-- Bootstrap Core JavaScript -->
<script src="clustergram/static/lib/js/bootstrap.min.js"></script>
<script src="clustergram/static/lib/js/bootstrap-switch.min.js"></script>
<script src="clustergram/static/lib/js/crossfilter.js"></script>
<script src="clustergram/static/lib/js/d3.js"></script>
<script src="clustergram/static/lib/js/dc.js"></script>
<script src="clustergram/static/lib/js/queue.js"></script>
<!-- <script src="clustergram/static/lib/js/keen.min.js"></script> -->
<script src="clustergram/static/lib/js/underscore-min.js"></script>
<script src="clustergram/static/lib/js/underscore.strings.js"></script>
<script src='clustergram/static/lib/js/blockUI.js'></script>
<script src='clustergram/static/lib/js/type_ahead.js'></script>
<!-- Clustergram Scripts -->
<script src='clustergram/static/js/d3_clustergram.js'></script>
<script>
// run initially
d3.select('#gene_exp_view').style('display', 'block');
d3.selectAll('#homepage_view').style('display', 'none');
d3.select('#svg_div_exp').style('display', 'none');
d3.select('#svg_div_tfsub').style('display', 'block');

console.log('make tfsub clustergram')

// callback function for click tile
click_tile = function click_tile(tile_info) {
  console.log(tile_info);
}

//!! temporary change to test similarity matrix
// d3.json('/LDRgram/clustergram/static/networks/chik_cutoff_'+inst_cutoff+'.json', function(network_data){
d3.json('clustergram/static/networks/LDR_as_cl.json', function(network_data) {

  console.log(network_data)

  // new way of making clustergram
  var outer_margins = {
    'top': 0,
    'bottom': 0,
    'left': 0,
    'right': 0
  };

  // define callback function for clicking on tile
  function click_tile_callback(tile_info) {
    console.log('my callback')
    console.log('clicking on ' + tile_info.row + ' row and ' + tile_info.col +
      ' col with value ' + String(tile_info.value))
  };

  // define arguments object
  var arguments_obj = {
    'network_data': network_data,
    'svg_div_id': 'svg_div',
    'row_label': 'Assays',
    'col_label': 'Cell Lines',
    'outer_margins': outer_margins,
    'opacity_scale': 'log',
    'input_domain': 0.1,
    'tile_colors': ['#ED9124', '#1C86EE'],
    'title_tile': true,
    'click_tile': click_tile_callback,
    // 'click_group': click_group_callback
    'resize': false,
    'order': 'rank'
  };

  //!! define mock res_color_dict
  res_color_dict = {};

  // make clustergram: pass network_data and the div name where the svg should be made
  d3_clustergram.make_clust(arguments_obj);

  var runIt;
  $(window).resize(function() {
    if ($(window).width() > 992) {
      clearTimeout(runIt);
      runIt = setTimeout(d3_clustergram.make_clust(arguments_obj), 100);
    }
  });

});
</script>
