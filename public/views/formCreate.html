<div ng-controller="FormCreateCtrl">
    <div class="form-info-block">
        <p>Add Milestones meta-data to your center's list by filling out the form on the left. <strong>Required fields are marked with an asterisk.</strong> For security reasons, you are not allowed to change the center name. If this is incorrect, please <a href="mailto:michael.mcdermott@mssm.edu?Subject=[Milestones Forms Improvment]">contact Michael McDermott</a>.<p>
        <p>Upon clicking the entry fields, you'll notice that there is an autocomplete available for each one. These entries were taken directly from your center's submitted data at the beginning of 2015.</p>
        <p>Although not shown, there is additional meta-data recorded for each entry. You can see the list of all entries with all of their respective meta-data by visiting the <a ui-sref="formData">Form Data</a> page also found at the top right of the page. <strong>We recommend that you check here before submitting any forms.</strong> Also note that you must be logged in to visit the Form Data page.</p>
        <p>If there is an entry missing from the input list, you may also click the <a style="text-decoration: none;" id="add-new-btn-paragraph" class="glyphicon glyphicon-plus"></a> button to add an entry without leaving the page. If entered correctly, your addition should immediately appear in the list of autocomplete items.</p>
    </div>
    <form name="dataForm" class="form-block">
        <h4 class="form-center">Center: {{form.centerName}}</h4>

        <h4 class="form-title">Assay</h4>
        <div class="form-input">
            <ui-select class="form-select" ng-model="form.assay" theme="select2" ng-disabled="disabled">
            <ui-select-match placeholder="Select assay...">{{$select.selected.name}}</ui-select-match>
            <ui-select-choices repeat="assay in assays | propsFilter: {name: $select.search, info: $select.search}">
            <div ng-bind-html="assay.name | highlight: $select.search"></div>
            <small>
                <strong>info:</strong> <span ng-bind-html="''+assay.info | highlight: $select.search"></span>
            </small>
            </ui-select-choices>
            </ui-select>
            <a ng-if="form.assay.name !== undefined" id="clear-btn" class="glyphicon glyphicon-remove-circle" ng-click="clearSelection('Assay')"></a>
            <a id="add-new-btn" class="glyphicon glyphicon-plus" ng-click="addNew('Assay')"></a>
        </div>

        <h4 class="form-title">Cell lines</h4>
        <h4 class="form-count">count: {{form.cellLines.length}}</h4>
        <div class="form-input">
            <ui-select class="form-select" multiple ng-model="form.cellLines" theme="select2" ng-disabled="disabled">
            <ui-select-match placeholder="Select cell lines...">{{$item.name}} &lt;{{$item.class}}&gt;</ui-select-match>
            <ui-select-choices repeat="line in cellLines | propsFilter: {name: $select.search, class: $select.search}">
            <div ng-bind-html="line.name | highlight: $select.search"></div>
            <small>
                <strong>class:</strong> <span ng-bind-html="''+line.class | highlight: $select.search"></span>
            </small>
            </ui-select-choices>
            </ui-select>
            <a id="add-new-btn" class="glyphicon glyphicon-plus" ng-click="addNew('Cell Line')"></a>
        </div>

        <h4 class="form-title">Perturbagens</h4>
        <h4 class="form-count">count: {{form.perturbagens.length}}</h4>
        <div class="form-input">
            <ui-select class="form-select" multiple ng-model="form.perturbagens" theme="select2" ng-disabled="disabled">
            <ui-select-match placeholder="Select perturbagens...">{{$item.name}} &lt;{{$item.type}}&gt;</ui-select-match>
            <ui-select-choices repeat="pert in perturbagens | propsFilter: {name: $select.search, type: $select.search}">
            <div ng-bind-html="pert.name | highlight: $select.search"></div>
            <small>
                <strong>type:</strong> <span ng-bind-html="''+pert.type | highlight: $select.search"></span>
            </small>
            </ui-select-choices>
            </ui-select>
            <a id="add-new-btn" class="glyphicon glyphicon-plus" ng-click="addNew('Perturbagen')"></a>
        </div>

        <h4 class="form-title">Readouts</h4>
        <h4 class="form-count">count: {{form.readouts.length}}</h4>
        <div class="form-input">
            <ui-select class="form-select" multiple ng-model="form.readouts" theme="select2" ng-disabled="disabled">
            <ui-select-match placeholder="Select readouts...">{{$item.name}} &lt;{{$item.datatype}}&gt;</ui-select-match>
            <ui-select-choices repeat="rout in readouts | propsFilter: {name: $select.search, datatype: $select.search}">
            <div ng-bind-html="rout.name | highlight: $select.search"></div>
            <small>
                <strong>type:</strong> <span ng-bind-html="''+rout.datatype | highlight: $select.search"></span>
            </small>
            </ui-select-choices>
            </ui-select>
            <a id="add-new-btn" class="glyphicon glyphicon-plus" ng-click="addNew('Readout')"></a>
        </div> 

        <h4 class="form-title">Relevant Disease</h4>
        <div class="form-input">
            <ui-select class="form-select" ng-model="form.disease" theme="select2" ng-disabled="disabled">
            <ui-select-match placeholder="Select relevant disease...">{{$select.selected.name}}</ui-select-match>
            <ui-select-choices repeat="disease in diseases | propsFilter: {name: $select.search, info: $select.search}">
            <div ng-bind-html="disease.name | highlight: $select.search"></div>
            </ui-select-choices>
            </ui-select>
            <a ng-if="form.disease.name !== undefined" id="clear-btn" class="glyphicon glyphicon-remove-circle" ng-click="clearSelection('Disease')"></a>
            <a id="add-new-btn" class="glyphicon glyphicon-plus" ng-click="addNew('Disease')"></a>
        </div>

        <div class="form-date">
            <h4 class="form-title">Level 1</h4>
            <p class="input-group">
            <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="form.releaseDates.levelOne" is-open="lvlOneOpened" min-date="minDate" datepicker-options="dateOptions" date-disabled="disabledDate(date, mode)" close-text="Close" />
            <span class="input-group-btn">
                <button type="button" class="btn btn-default" ng-click="lvlOneOpen($event)"><i class="glyphicon glyphicon-calendar"></i></button>
            </span>
            </p>
        </div>

        <div class="form-date">
            <h4 class="form-title">Level 2</h4>
            <p class="input-group">
            <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="form.releaseDates.levelTwo" is-open="lvlTwoOpened" min-date="minDate" datepicker-options="dateOptions" date-disabled="disabledDate(date, mode)" close-text="Close" />
            <span class="input-group-btn">
                <button type="button" class="btn btn-default" ng-click="lvlTwoOpen($event)"><i class="glyphicon glyphicon-calendar"></i></button>
            </span>
            </p>
        </div>

        <div class="form-date">
            <h4 class="form-title">Level 3</h4>
            <p class="input-group">
            <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="form.releaseDates.levelThree" is-open="lvlThreeOpened" min-date="minDate" datepicker-options="dateOptions" date-disabled="disabledDate(date, mode)" close-text="Close" />
            <span class="input-group-btn">
                <button type="button" class="btn btn-default" ng-click="lvlThreeOpen($event)"><i class="glyphicon glyphicon-calendar"></i></button>
            </span>
            </p>
        </div>

        <div class="form-date">
            <h4 class="form-title">Level 4</h4>
            <p class="input-group">
            <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="form.releaseDates.levelFour" is-open="lvlFourOpened" min-date="minDate" datepicker-options="dateOptions" date-disabled="disabledDate(date, mode)" close-text="Close" />
            <span class="input-group-btn">
                <button type="button" class="btn btn-default" ng-click="lvlFourOpen($event)"><i class="glyphicon glyphicon-calendar"></i></button>
            </span>
            </p>
        </div>

        <div class="post-button text-center">
            <button type="submit" ng-click="reset()" class="btn btn-default text-center">Reset</button>
            <button type="submit" ng-click="postAddAnother()" class="btn btn-default text-center">Submit and Add Another</button>
            <button type="submit" ng-click="postMove()" class="btn btn-default text-center">Submit and Return</button>
        </div>
    </form>
</div>

